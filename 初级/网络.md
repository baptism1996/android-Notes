### 网络

请求报文格式：

```xml
<method> <request-url> <version>
<headers>

<entity-body>
```

响应报文格式

```xml
<version> <status> <reason-phrase>
<headers>

<entity-body>
```

**区别主要在与起始行**

  <method> 指请求方法，常用的主要是Get、 Post、Head 还有其他一些我们这里就不说了，有兴趣的可以自己查阅一下

<version> 指协议版本，现在通常都是Http/1.1了

<request-url> 请求地址

<status> 指响应状态码， 我们熟悉的200、404等等

<reason-phrase> 原因短语，200 OK 、404 Not Found 这种后面的描述就是原因短语，通常不必太关注。  

****

* 在GET请求中，由于url是ASCII编码的，所以参数中如果有Unicode编码的字符，例如汉字，都会编码之后传输
* 当我们发起一个http请求后，服务器返回所请求的资源，这时我们可以将该资源的**副本**存储在**本地**，这样当**再次**对该url资源发起请求时，我们能快速的从本地存储设备中获取到该url资源，这就是所谓的缓存。我们知道，有些url所对应的资源并**不是一成不变的**，服务器中该url的资源可能在一定时间之后会被修改。这时**本地缓存中的资源**将与**服务器一侧**的资源有差异。
* 新鲜度检测。每隔一段时间对缓存的资源进行检测，以判断是否和服务器资源一致

***

* OkHttp的请求在发送到服务器之前会经过一系列的Interceptor

* 如果缓存响应的Cache-Control首部包含immutable,那么说明该资源不会改变。客户端可以直接使用缓存结果。值得注意的是immutable并不属于http协议的一部分，而是由facebook提出的扩展属性。

* ```java
  CacheControl responseCaching = cacheResponse.cacheControl();
    if (responseCaching.immutable()) {
      return new CacheStrategy(null, cacheResponse);
    }
  ```

* OkHttp缓存大致的流程

1. 从接收到的请求中，解析出Url和各个首部。

2. 查询本地是否有缓存副本可以使用。

3. 如果有缓存，则进行新鲜度检测，如果缓存足够新鲜，则使用缓存作为响应返回，如果不够新鲜了，则构造条件请求，发往服务器再验证。如果没有缓存，就直接将请求发往服务器。

4. 把从服务器返回的响应，更新或是新增到缓存中。

   ***

   * 简单的说 Http + 加密 + 认证 + 完整性保护 = Https，采用了SSL\TLS加密方法

   * 近代密码学中加密的方式主要有两类：
     1. 对称秘钥加密
     2. 非对称秘钥加密

   * SSL\TLS的加密方式则是结合了两种加密方式的优点。首先采用非对称秘钥加密，将一个**对称秘钥**使用公开秘钥**加密后**传输到对方。对方使用私有秘钥解密，得到传输的对称秘钥。之后双方再使用对称秘钥进行通信。这样即解决了对称秘钥加密的秘钥传输问题，又利用了对称秘钥的高效率来进行通信内容的加密与解密。

   * SSL\TLS采用的混合加密的方式还是存在一个问题，即怎么样确保用于加密的公开秘钥确实是**所期望的**服务器所分发的呢？也许在收到公开秘钥时，这个公开秘钥**已经**被别人篡改了。

     * 服务器的运营人员可以向认证机构提出公开秘钥申请。认证机构在审核之后，会将公开秘钥与共钥证书**绑定**。服务器就可以将这个共钥证书下发给客户端，客户端在**收到**证书后，使用认证机构的公开秘钥进行**验证**。一旦验证成功，即可知道这个秘钥是可以信任的秘钥。

   * Https的通信流程：
     1. Client发起请求
     2. Server端响应请求，并在之后将证书发送至Client
     3. Client使用认证机构的共钥认证证书，并从证书中取出Server端共钥。
     4. Client使用共钥加密一个随机秘钥，并传到Server
     5. Server使用私钥解密出随机秘钥
     6. 通信双方使用随机秘钥最为对称秘钥进行加密解密。

     ****

     ## GET

     get是用于信息获取的，就是说，它仅仅是获取资源信息，就像数据库查询一样，不会修改，增加数据，不会影响资源的状态。

     ## POST

     POST表示可能修改变服务器上的资源的请求，比如我们发一个帖子到服务器，这时候就用到了post请求，他会改变服务器中的存储资源。

****

### socket

* 在 Java 的 SDK 中，socket 的共有两个接口：用于监听客户连接的 `ServerSocket` 和用于通信的 `Socket`。
* 实际应用中，在发生异常时，需要关闭 socket，并根据实际业务做一些错误处理工作

